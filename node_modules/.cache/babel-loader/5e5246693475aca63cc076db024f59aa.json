{"ast":null,"code":"import actionTypes from \"../actions/actionTypes\";\nconst initialState = {\n  isEmpty: false,\n  cartItems: [],\n  orderDetails: []\n};\n\nconst cartReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.FETCH_ALL_PRODUCT_SUCCESS:\n      state.products = action.products;\n      return { ...state\n      };\n\n    case actionTypes.FETCH_ALL_PRODUCT_FAILED:\n      state.products = [];\n      return { ...state\n      };\n\n    case actionTypes.FETCH_ALL_PRODUCT_PAGE_SUCCESS:\n      state.allProductsPage = action.dataAllProduct;\n      return { ...state\n      };\n\n    case actionTypes.FETCH_ALL_PRODUCT_PAGE_FAILED:\n      state.allProductsPage = [];\n      return { ...state\n      };\n\n    case actionTypes.FETCH_ALL_DETAIL_PRODUCT_SUCCESS:\n      state.allDetailProduct = action.dataAllDetailProduct;\n      return { ...state\n      };\n\n    case actionTypes.FETCH_ALL_DETAIL_PRODUCT_FAILED:\n      state.allDetailProduct = [];\n      return { ...state\n      };\n    // case actionTypes.ADD_TO_CART_SUCCESS:\n    //     return {\n    //         ...state,\n    //         cartItems: [...state.cartItems, action.payload],\n    //     };\n\n    case actionTypes.ADD_TO_CART_SUCCESS:\n      const product = action.payload.detailProduct || action.payload.item;\n      const existingProductIndex = state.cartItems.findIndex(p => {\n        var _p$detailProduct;\n\n        return (((_p$detailProduct = p.detailProduct) === null || _p$detailProduct === void 0 ? void 0 : _p$detailProduct.id) || p.item.id) === product.id;\n      });\n\n      if (existingProductIndex === -1) {\n        return { ...state,\n          cartItems: [...state.cartItems, action.payload]\n        };\n      } else {\n        const newCart = state.cartItems.map((item, index) => {\n          if (index === existingProductIndex) {\n            if (item.amount === undefined) {\n              item.amount = action.payload.amount;\n            } else {\n              item.amount += action.payload.amount;\n            }\n          }\n\n          return item;\n        });\n        return {\n          cartItems: newCart\n        };\n      }\n\n    case actionTypes.ADD_TO_CART_FAILED:\n      return { ...state,\n        cartItems: [...state.cartItems, action.payload]\n      };\n\n    case actionTypes.ADD_TO_ORDER_SUCCESS:\n      return { ...state,\n        orderDetails: action.payload\n      };\n\n    case actionTypes.ADD_TO_ORDER_FAILED:\n      return { ...state,\n        orderDetails: []\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default cartReducer;","map":{"version":3,"sources":["D:/LienSon/LienSon-FE/src/store/reducers/cartReducer.js"],"names":["actionTypes","initialState","isEmpty","cartItems","orderDetails","cartReducer","state","action","type","FETCH_ALL_PRODUCT_SUCCESS","products","FETCH_ALL_PRODUCT_FAILED","FETCH_ALL_PRODUCT_PAGE_SUCCESS","allProductsPage","dataAllProduct","FETCH_ALL_PRODUCT_PAGE_FAILED","FETCH_ALL_DETAIL_PRODUCT_SUCCESS","allDetailProduct","dataAllDetailProduct","FETCH_ALL_DETAIL_PRODUCT_FAILED","ADD_TO_CART_SUCCESS","product","payload","detailProduct","item","existingProductIndex","findIndex","p","id","newCart","map","index","amount","undefined","ADD_TO_CART_FAILED","ADD_TO_ORDER_SUCCESS","ADD_TO_ORDER_FAILED"],"mappings":"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","sourcesContent":["import actionTypes from \"../actions/actionTypes\";\r\n\r\nconst initialState = {\r\n  isEmpty: false,\r\n  cartItems: [],\r\n  orderDetails: [],\r\n};\r\n\r\nconst cartReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.FETCH_ALL_PRODUCT_SUCCESS:\r\n      state.products = action.products;\r\n      return {\r\n        ...state,\r\n      };\r\n\r\n    case actionTypes.FETCH_ALL_PRODUCT_FAILED:\r\n      state.products = [];\r\n      return {\r\n        ...state,\r\n      };\r\n\r\n    case actionTypes.FETCH_ALL_PRODUCT_PAGE_SUCCESS:\r\n      state.allProductsPage = action.dataAllProduct;\r\n      return {\r\n        ...state,\r\n      };\r\n\r\n    case actionTypes.FETCH_ALL_PRODUCT_PAGE_FAILED:\r\n      state.allProductsPage = [];\r\n      return {\r\n        ...state,\r\n      };\r\n\r\n    case actionTypes.FETCH_ALL_DETAIL_PRODUCT_SUCCESS:\r\n      state.allDetailProduct = action.dataAllDetailProduct;\r\n      return {\r\n        ...state,\r\n      };\r\n\r\n    case actionTypes.FETCH_ALL_DETAIL_PRODUCT_FAILED:\r\n      state.allDetailProduct = [];\r\n      return {\r\n        ...state,\r\n      };\r\n    // case actionTypes.ADD_TO_CART_SUCCESS:\r\n    //     return {\r\n    //         ...state,\r\n    //         cartItems: [...state.cartItems, action.payload],\r\n    //     };\r\n    case actionTypes.ADD_TO_CART_SUCCESS:\r\n      const product = action.payload.detailProduct || action.payload.item;\r\n      const existingProductIndex = state.cartItems.findIndex(\r\n        (p) => (p.detailProduct?.id || p.item.id) === product.id\r\n      );\r\n      if (existingProductIndex === -1) {\r\n        return {\r\n          ...state,\r\n          cartItems: [...state.cartItems, action.payload],\r\n        };\r\n      } else {\r\n        const newCart = state.cartItems.map((item, index) => {\r\n          if (index === existingProductIndex) {\r\n            if (item.amount === undefined) {\r\n              item.amount = action.payload.amount;\r\n            } else {\r\n              item.amount += action.payload.amount;\r\n            }\r\n          }\r\n          return item;\r\n        });\r\n        return { cartItems: newCart };\r\n      }\r\n\r\n    case actionTypes.ADD_TO_CART_FAILED:\r\n      return {\r\n        ...state,\r\n        cartItems: [...state.cartItems, action.payload],\r\n      };\r\n\r\n    case actionTypes.ADD_TO_ORDER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        orderDetails: action.payload,\r\n      };\r\n\r\n    case actionTypes.ADD_TO_ORDER_FAILED:\r\n      return {\r\n        ...state,\r\n        orderDetails: [],\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default cartReducer;\r\n"]},"metadata":{},"sourceType":"module"}